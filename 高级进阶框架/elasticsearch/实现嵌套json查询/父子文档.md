```
父子文档总结：
1 每一个索引只能定义一个join field
2 父子文档必须在同一个分片上，意味着查询，更新操作都需要加上routing
3 可以向一个已经存在的join field上新增关系
4 父子文档，适合那种数据结构基本一致的场景，如果两个表架构完全不一致，不建议使用这种结构
5 父子文档也有缺点，查询速度是这三个方案里面最慢的一个

DELETE exam_index

PUT exam_index
{
  "mappings": {
    "properties": {
      "studentName": {
        "type": "keyword"
      },
      "parent_join_child": {
        "type": "join",
        "relations":{
          "question":"answer"
        }
      }
    }
  }
}


PUT exam_index/_doc/1
{
  "myStudent":"1",
  "text":"周坤豪提出的问题",
  "parent_join_child":{
    "name":"question"
  }
}

PUT exam_index/_doc/2
{
  "myStudent": "2",
  "text": "习近平提出的问题",
  "parent_join_child": {
    "name": "question"
  }
}

GET exam_index/_search


PUT exam_index/_doc/3?routing=1
{
  "myStudent":"3",
  "text":"周坤豪的问题答案1",
  "parent_join_child":{
    "name":"answer",
    "parent":"1"
  }
}

PUT exam_index/_doc/4?routing=1
{
  "myStudent":"4",
  "text":"周坤豪的问题答案2",
  "parent_join_child":{
    "name":"answer",
    "parent":"1"
  }
}

PUT exam_index/_doc/5?routing=5
{
  "myStudent":"5",
  "text":"习近平的问题答案1",
  "parent_join_child":{
    "name":"answer",
    "parent":"2"
  }
}

GET exam_index/_mapping

GET exam_index/_search
{
  "query": {"match_all": {}},
  "sort": [
    {
      "myStudent.keyword": {
        "order": "desc"
      }
    }
  ]
}

# 通过子文档查询父文档
GET exam_index/_search
{
  "query": {
    "has_child": {
      "type": "answer",
      "query": {
        "match": {
          "text": "答案1"
        }
      }
    }
  }
}

# 通过父文档查询子文档
GET exam_index/_search
{
  "query": {
    "has_parent": {
      "parent_type": "question",
      "query": {
        "match": {
          "text": "习近平"
        }
      }
    }
  }
}

# 通过父 ID 查询子文档
GET exam_index/_search
{
  "query": {
    "parent_id":{
      "type":"answer",
      "id":"1"
    }
  }
}
```